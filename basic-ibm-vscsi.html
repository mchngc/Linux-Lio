<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Linux-IO Documentation</title>
  <link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/style.css">
  <!-- Highlight.js core -->
<link rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github.min.css"
      id="hljs-theme-light">
<link rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css"
      id="hljs-theme-dark" disabled>

<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>

</head>
<body>
  <header>
  <div class="logo">
    <a href="index.html">Linux SCSI Target IO</a>
  </div>

  <div class="header-right">
    <nav>
      <ul>
        <li><a href="#overview">Overview</a></li>
        <li class="dropdown-parent">
          <a href="#" id="code-toggle">Code ▾</a>
          <ul class="dropdown">
            <li><a href="https://github.com/open-iscsi/targetcli-fb/">targetcli</a></li>
            <li><a href="https://github.com/open-iscsi/rtslib-fb/">rtslib</a></li>
            <li><a href="https://github.com/open-iscsi/tcmu-runner">tcmu-runner</a></li>
          </ul>
        </li>
        <li><a href="docs.html">Documentation</a></li>
      </ul>
    </nav>

    <div class="menu">
      <button id="menu-toggle" aria-label="Settings">☰</button>
      <ul class="menu-dropdown" id="menu-dropdown">
        <li><button id="theme-toggle">Toggle dark mode</button></li>
       </ul>
    </div>
  </div>
</header>

  <main>
    <aside class="sidebar">
      <h2>Docs Menu</h2>
      <ul>
        <li>
          <a href="#" class="dropdown-toggle" data-target="basic-dropdown">Basic Setup</a>
          <ul class="sidebar-dropdown" id="basic-dropdown">
            <li><a href="basic-iscsi.html">iSCSI</a></li>
            <li><a href="basic-vhost.html">vhost-scsi</a></li>
            <li><a href="basic-fcoe.html">FCoE</a></li>
            <li><a href="basic-fibre.html">Fibre Channel</a></li>
            <li><a href="basic-ibm-vscsi.html">IBM vSCSi (System P)</a></li>
            <li><a href="basic-iser.html">ISER (InfiniBand)</a></li>
            <li><a href="basic-loopback.html">Loopback</a></li>
            <li><a href="basic-srp.html">SRP (Infiniband)</a></li>
          </ul>
        </li>
        <li>
          <a href="#" class="dropdown-toggle" data-target="tuning-dropdown">Tuning</a>
          <ul class="sidebar-dropdown" id="tuning-dropdown">
            <li><a href="tuning-vhost.html">vhost-scsi</a></li>
          </ul>
        </li>
      </ul>
    </aside>
<section class="content">
    <h1>IBM vSCSI</h1>
    <h2>Overview</h2>
    <p>The IBM vSCSI fabric module provides virtualized LinuxIO devices on the IBM System p.

    </p>
    <p>IBM vSCSI is based on a fabric module from Tomonori Fujita from NTT Labs. The fabric module (ibmvscsis.ko) for LIO currently remains out-of-tree.

</p>

<h2>Modules</h2>
<p>ismod output:</p>
<pre><code class="language-bash">Module                  Size  Used by
ibmvscsis              22024  4 
libsrp                  9242  1 ibmvscsis
scsi_tgt               15597  1 libsrp
target_core_file       10766  1 
target_core_mod       266898  10 ibmvscsis,target_core_file
configfs               33950  2 target_core_mod</code></pre>
<h2>targetcli</h2>
<p>targetcli is used to configure vHost targets. targetcli aggregates LIO service modules via a core library, and exports them through an API, to provide a unified single-node SAN configuration shell, independently of the underlying fabric(s).

</p>

</section>

  </main>

  <script>
    document.querySelectorAll('.dropdown-toggle').forEach(toggle => {
      toggle.addEventListener('click', function(e) {
        e.preventDefault();
        const targetId = this.getAttribute('data-target');
        const dropdown = document.getElementById(targetId);
        dropdown.classList.toggle('open');
      });
    });
    const toggle = document.getElementById('code-toggle');
  const dropdown = document.querySelector('header nav .dropdown');
  document.addEventListener('click', (e) => {
    if (toggle && toggle.contains(e.target)) {
      e.preventDefault();
      dropdown.classList.toggle('open');
    } else if (dropdown && !dropdown.contains(e.target)) {
      dropdown.classList.remove('open');
    }
  });
  // Hamburger menu
const menuToggle = document.getElementById('menu-toggle');
const menuDropdown = document.getElementById('menu-dropdown');
const themeToggle = document.getElementById('theme-toggle');
const fontSizeToggle = document.getElementById('font-size-toggle');
const body = document.body;

// Open/close menu
menuToggle.addEventListener('click', (e) => {
  e.stopPropagation();
  menuDropdown.classList.toggle('open');
  
});

// Close when clicking outside
document.addEventListener('click', (e) => {
  if (!menuDropdown.contains(e.target) && !menuToggle.contains(e.target)) {
    menuDropdown.classList.remove('open');
  }
});

// Load theme: prefer saved choice, else system preference
const savedTheme = localStorage.getItem('theme');
if (savedTheme === 'dark') {
  body.classList.add('dark-mode');
} else if (savedTheme === 'light') {
  body.classList.remove('dark-mode');
} else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
  body.classList.add('dark-mode');
}

// Dark mode toggle
themeToggle.addEventListener('click', () => {
  body.classList.toggle('dark-mode');
  if (body.classList.contains('dark-mode')) {
    localStorage.setItem('theme', 'dark');
  } else {
    localStorage.setItem('theme', 'light');
  }
  menuDropdown.classList.remove('open');
});

// Font size toggle
fontSizeToggle.addEventListener('click', () => {
  if (body.classList.contains('large-text')) {
    body.classList.remove('large-text');
    fontSizeToggle.textContent = "Increase font size";
    localStorage.removeItem('font-size');
  } else {
    body.classList.add('large-text');
    fontSizeToggle.textContent = "Reset font size";
    localStorage.setItem('font-size', 'large');
  }
  menuDropdown.classList.remove('open');
});

// Load font size preference
if (localStorage.getItem('font-size') === 'large') {
  body.classList.add('large-text');
  fontSizeToggle.textContent = "Reset font size";
}



  </script>



  <script>
document.addEventListener('DOMContentLoaded', () => {
  const backToTopBtn = document.getElementById('back-to-top');
  if (!backToTopBtn) return;

  const updateVisibility = () => {
    backToTopBtn.style.display = (window.scrollY > 300) ? 'block' : 'none';
  };

  updateVisibility(); // set initial state
  window.addEventListener('scroll', updateVisibility);

  backToTopBtn.addEventListener('click', () => {
    window.scrollTo({ top: 0, behavior: 'smooth' });
  });
});
</script>
<script>
document.addEventListener('DOMContentLoaded', () => {
  // Initialise highlight.js on all code blocks
  hljs.highlightAll();

  const body = document.body;
  const darkThemeLink = document.getElementById('hljs-theme-dark');
  const lightThemeLink = document.getElementById('hljs-theme-light');

  // Whenever dark mode toggles, swap the highlight theme
  const syncHighlightTheme = () => {
    if (body.classList.contains('dark-mode')) {
      darkThemeLink.removeAttribute('disabled');
      lightThemeLink.setAttribute('disabled','');
    } else {
      lightThemeLink.removeAttribute('disabled');
      darkThemeLink.setAttribute('disabled','');
    }
  };

  // Call once on page load
  syncHighlightTheme();

  // Hook into your existing dark-mode button
  const themeToggle = document.getElementById('theme-toggle');
  if (themeToggle) {
    themeToggle.addEventListener('click', () => {
      // your code already toggles dark-mode on body
      // just wait a tick then sync highlight theme
      setTimeout(syncHighlightTheme, 0);
    });
  }
});
</script>

 <button id="back-to-top" aria-label="Back to top">↑</button>
 <footer>
    <p>Based on the original work at
       <a href="http://linux-iscsi.org" target="_blank" rel="noopener">linux-iscsi.org</a>, and updated by
      <a href="https://github.com/mchngc" target = "_blank">
        Max Christie
        </a>
      .Thanks to Nicholas Bellinger for creating LIO.
      </a>
    </p>
  </footer>
  
</body>
</html>
